(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){},150:function(e,t,a){},152:function(e,t,a){},163:function(e,t,a){e.exports=a(286)},168:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){},271:function(e,t,a){},278:function(e,t,a){},284:function(e,t,a){},286:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),l=a.n(i),o=a(85),s=a(7),c=a(8),u=a(10),m=a(9),g=a(11),d=(a(168),a(37)),p=a(293),h=a(299),v=a(294),E=a(300),k=a(153),f=(a(170),a(172),a(17)),b=a.n(f),j=a(176),S=a(206),y=(a(174),7e-4);var O=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,a=this.props,n=a.myPosition,i=a.position,l=a.onClick;return r.a.createElement(j.a,{in:!!n&&(e=n,t=i,!(Math.abs(e[0]-t[0])<y&&Math.abs(e[1]-t[1])<y)),timeout:500},r.a.createElement("div",{id:"center-me",onClick:l},r.a.createElement(S.a,{className:"fillParent",src:"/icons/center_location.png",circle:!0,responsive:!0})))}}]),t}(n.Component),w=(a(134),a(296)),C=a(288),P=(a(53),a(287)),M=(a(135),a(118)),z=a.n(M),N=a(157),T=a.n(N),U=a(86);z.a.locale("hr",{months:"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),monthsShort:"Sij._Velj._O\u017eu._Tra._Svi._Lip._Srp._Kol._Ruj._Lis._Stu._Pro.".split("_"),monthsParseExact:!0,weekdays:"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),weekdaysShort:"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),weekdaysMin:"N_P_U_S_\u010c_P_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D. MMMM YYYY. HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Danas] LT",nextDay:"[Sutra] LT",nextWeek:"[Sljede\u0107i tjedan] LT",lastDay:"[Ju\u010der] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?"er":"e")},meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,a){return e<12?"PD":"MD"},week:{dow:1,doy:4}}),T()();var L=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={minDatetime:null,datetime:null,lenght:1,alertMsg:null,registrationValid:!1},a.datetimeChange=function(e){return a.setState({datetime:e,alertMsg:null})},a.lenghtChange=function(e){return a.setState({lenght:e.target.value,alertMsg:null})},a.register=function(){var e=a.state,t=e.datetime,n=e.lenght,r=null!=t,i=r?null:"Morate odabrati vrijeme rezervacije!";if(r){var l={parkingID:a.props.parking.id,vrijemePocetka:t.getTime(),trajanje:n};fetch("/rezervacije/jednokratne",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(function(e){200!=e.status?e.json().then(function(e){a.setState({registrationValid:!1,alertMsg:"Parkirali\u0161te je popunjeno u odabranom periodu! Odaberite drugo vrijeme."})}):(a.setState({registrationValid:!0,alertMsg:"Uspje\u0161na rezervacija!"}),setTimeout(function(){return a.props.onHide()},2500))})}else a.setState({registrationValid:r,alertMsg:i})};var n=new Date;return n.setHours(n.getHours()+6),a.state.datetime=n,a.state.minDatetime=n,a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.datetime,a=e.lenght,n=e.minDatetime,i=e.alertMsg,l=e.registrationValid,o=this.props.back;return r.a.createElement("div",null,r.a.createElement(w.a.Body,null,r.a.createElement("p",null,"Izaberite datum i vrijeme rezervacije:"),r.a.createElement(U.DateTimePicker,{min:n,value:t,onChange:this.datetimeChange}),r.a.createElement("p",null,r.a.createElement("br",null),"Izaberite trajanje ",r.a.createElement("small",null,"(u satima)")," rezervacije:"),r.a.createElement("input",{type:"number",min:1,max:24,value:a,onChange:this.lenghtChange}),r.a.createElement("p",null,r.a.createElement("br",null)),i?r.a.createElement(P.a,{bsStyle:l?"success":"danger"},i):null),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:o},"Natrag"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Rezerviraj")))}}]),t}(n.Component),H=a(301),I=a(269),A=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={days:[],startTime:new Date,lenght:1,alertMsg:null,registrationValid:!1},a.startTimeChange=function(e){return a.setState({startTime:e,alertMsg:null})},a.daysChange=function(e){a.setState({days:e,alertMsg:null})},a.lenghtChange=function(e){return a.setState({lenght:e.target.value,alertMsg:null})},a.register=function(){var e=a.state,t=e.days,n=e.startTime,r=e.lenght,i=null!=n;if(null!=n)if(0!==t.length){if(i){var l=String(n.getHours())+":"+n.getMinutes(),o={parkingID:a.props.parking.id,dani:t,vrijemePocetka:l,trajanje:r};fetch("/rezervacije/ponavljajuce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){200!=e.status?e.json().then(function(e){a.setState({registrationValid:!1,alertMsg:"Parkirali\u0161te je popunjeno u odabranom periodu! Odaberite drugo vrijeme."})}):(a.setState({registrationValid:!0,alertMsg:"Uspje\u0161na rezervacija!"}),setTimeout(function(){return a.props.onHide()},2500))})}}else a.setState({registrationValid:!1,alertMsg:"Morate odabrati barem jedan dan u tjednu"});else a.setState({registrationValid:!1,alertMsg:"Morate odabrati vrijeme rezervacije!"})};var n=new Date;return n.setHours(n.getHours()+6),a.state.datetime=n,a.state.minDatetime=n,a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.days,n=t.startTime,i=t.lenght,l=t.alertMsg,o=t.registrationValid,s=this.props.back;return r.a.createElement("div",null,r.a.createElement(w.a.Body,null,r.a.createElement("p",null,"Izaberite dane u tjednu koje \u017eelite rezervirati:"),r.a.createElement(H.a,{type:"checkbox",value:a,onChange:this.daysChange},r.a.createElement(I.a,{bsStyle:"warning",value:2},"Pon"),r.a.createElement(I.a,{bsStyle:"warning",value:3},"Uto"),r.a.createElement(I.a,{bsStyle:"warning",value:4},"Sri"),r.a.createElement(I.a,{bsStyle:"warning",value:5},"\u010cet"),r.a.createElement(I.a,{bsStyle:"warning",value:6},"Pet"),r.a.createElement(I.a,{bsStyle:"warning",value:7},"Sub"),r.a.createElement(I.a,{bsStyle:"warning",value:1},"Ned")),r.a.createElement("p",null,r.a.createElement("br",null),"Izaberite vrijeme po\u010detka rezervacije u danu"),r.a.createElement(U.DateTimePicker,(e={value:n},Object(d.a)(e,"value",n),Object(d.a)(e,"onChange",this.startTimeChange),Object(d.a)(e,"date",!1),e)),r.a.createElement("p",null,r.a.createElement("br",null),"Izaberite trajanje ",r.a.createElement("small",null,"(u satima)")," rezervacije:"),r.a.createElement("input",{type:"number",min:1,max:24,value:i,onChange:this.lenghtChange}),r.a.createElement("p",null,r.a.createElement("br",null)),l?r.a.createElement(P.a,{bsStyle:o?"success":"danger"},l):null),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:s},"Natrag"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Rezerviraj")))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={alertMsg:null,registrationValid:!1},a.register=function(){var e={parkingID:a.props.parking.id};fetch("/rezervacije/trajna",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){200!=e.status?e.json().then(function(e){a.setState({registrationValid:!1,alertMsg:"Parkirali\u0161te je popunjeno u nekim periodima. Ne mogu rezervirati."})}):(a.setState({registrationValid:!0,alertMsg:"Uspje\u0161na rezervacija!"}),a.props.parkingsUpdate(),setTimeout(function(){return a.props.onHide()},2500))})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.back,t=this.state,a=t.alertMsg,n=t.registrationValid;return r.a.createElement("div",null,r.a.createElement(w.a.Body,null,r.a.createElement(C.a,null,"Trajna rezervacija po\u010dinje od trenutka kada kliknete gumb ",r.a.createElement("i",null,"rezerviraj"),".",r.a.createElement("br",null),"Neograni\u010deno \u0107ete biti rezervirani u odabranom parkirali\u0161tu.",r.a.createElement("br",null),"Da biste rezervaciju ukinuli idite na izbornik ",r.a.createElement("i",null,"Trajne rezervacije")," te ukiniti ovu trajnu rezervaciju."),a?r.a.createElement(P.a,{bsStyle:n?"success":"danger"},a):null),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:e},"Natrag"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Rezerviraj")))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={stage:null},a.hide=function(){a.props.onHide(),setTimeout(a.resetStage,200)},a.onChoose=function(e){a.setState({stage:e.target.name})},a.resetStage=function(){a.setState({stage:null})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.onHide,n=e.parking,i=e.cars,l=e.parkingsUpdate,o=this.state.stage,s=null;return null==o?s=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Odaberite vrstu rezervacije:")),r.a.createElement(w.a.Body,null,r.a.createElement("div",{className:"center1"},r.a.createElement("div",{className:"center2"},r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"jednokratna",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Jednokratna"),r.a.createElement("p",null,"Jednokratna rezervacija za ",r.a.createElement("b",null,"vremenski period kra\u0107i od 24 sata")," i to morate obaviti ",r.a.createElement("b",null,"barem 6 sati unaprijed"),".")),r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"ponavljajuca",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Ponavljaju\u0107a"),r.a.createElement("p",null,"Rezervacija koja se ",r.a.createElement("b",null,"ponavlja tjedno")," sljede\u0107ih ",r.a.createElement("b",null,"mjesec dana"),".")),r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"trajna",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Trajna"),r.a.createElement("p",null,"Rezervacija na ",r.a.createElement("b",null,"neograni\u010deni period")," (sve dok ju ne ukinete).")))))):"jednokratna"==o?s=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Jednokratna rezervacija")),r.a.createElement(L,{back:this.resetStage,onHide:this.hide,parking:n})):"ponavljajuca"==o?s=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Ponavljaju\u0107a rezervacija")),r.a.createElement(A,{back:this.resetStage,onHide:this.hide,parking:n})):"trajna"==o&&(s=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Trajna rezervacija")),r.a.createElement(D,{back:this.resetStage,onHide:this.hide,parking:n,parkingsUpdate:l}))),r.a.createElement(w.a,{className:"registration-modal",show:t,onHide:this.hide,keyboard:!0},0!=i.length?s:r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Trenutno nije mogu\u0107e rezervirati")),r.a.createElement(C.a,null,r.a.createElement("p",null,"Nemate registriran nijedan automobil.",r.a.createElement("br",null),"Idite u izbornik ",r.a.createElement("i",null,"Automobili")," te dodajte barem jedan automobil."))))}}]),t}(n.Component),B=a(295),R=(a(150),a(289)),x=a(297),K=a(290),F=(a(271),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.show;return r.a.createElement(j.a,{in:e},r.a.createElement("img",{alt:"U\u010ditavam...",src:"./icons/loading.gif"}))}}]),t}(n.Component)),Y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",loginLoading:!1,invalidLogin:!1},a.logIn=function(e){e.preventDefault(),a.setState({loginLoading:!0});var t=a.state,n=t.email,r=t.password,i=new FormData;i.append("username",n),i.append("password",r),fetch("/login",{method:"POST",body:i}).then(function(e){if(200!=e.status)return a.setState({loginLoading:!1}),void setTimeout(function(){return a.setState({invalidLogin:!0})},10);e.json().then(function(e){sessionStorage.setItem("tip",e.tip),sessionStorage.setItem("name",e.ime),sessionStorage.setItem("id",e.id),sessionStorage.setItem("username",e.username),a.setState({loginLoading:!1}),setTimeout(a.props.loginSuccess,10)})})},a.updateLogin=function(e){var t;a.setState((t={},Object(d.a)(t,e.target.name,e.target.value),Object(d.a)(t,"invalidLogin",!1),t))},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.loginLoading,i=e.invalidLogin;return r.a.createElement("form",{onSubmit:this.logIn},r.a.createElement(R.a,{validationState:i?"error":null},r.a.createElement(x.a,{name:"email",value:t,type:"email",placeholder:"e-mail",onChange:this.updateLogin,autoComplete:"email"})," "," ",r.a.createElement(x.a,{name:"password",value:a,type:"password",placeholder:"lozinka",onChange:this.updateLogin,autoComplete:"current-password"})," ",r.a.createElement(k.a,{bsStyle:"success",type:"submit",onClick:this.logIn,disabled:n},n?"Provjera...":"Prijavi se")," ","  ",r.a.createElement(K.a,{className:"inline"},i?"Neispravni podatci.":null),r.a.createElement(F,{show:n})))}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggingOut:!1},a.sendLogoutReq=function(){a.setState({isLoggingOut:!0}),a.props.logoutSuccess(),setTimeout(function(){a.setState({isLoggingOut:!1})},5e3)},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.isLoggingOut,t=this.props.isAddingNewParking;return r.a.createElement(B.a.Form,{pullRight:!0},r.a.createElement(k.a,{bsStyle:"danger",disabled:t,onClick:this.sendLogoutReq},"Odjavi se"),"   ",r.a.createElement(F,{show:e}))}}]),t}(n.Component),J=a(291),$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={oib:"",ime:"",prezime:"",email:"",password:"",creditCardNumber:"",voib:null,vime:null,vprezime:null,vemail:null,vpassword:null,vcreditCardNumber:null,alertMsg:null,registrationValid:!1},a.emailChange=function(e){var t=e.target.value,n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase());a.setState({email:t,vemail:n,alertMsg:null})},a.imeChange=function(e){var t=e.target.value,n=t.length>0;a.setState({ime:t,vime:n,alertMsg:null})},a.prezimeChange=function(e){var t=e.target.value,n=t.length>0;a.setState({prezime:t,vprezime:n,alertMsg:null})},a.passwordChange=function(e){var t=e.target.value,n=t.length>4;a.setState({password:t,vpassword:n,alertMsg:null})},a.oibChange=function(e){var t=e.target.value,n=11==t.length&&/^\d+$/.test(t);a.setState({oib:t,voib:n,alertMsg:null})},a.creditCardNumberChange=function(e){var t=e.target.value,n=t.length>=13&&t.length<=16&&/^\d+$/.test(t);a.setState({creditCardNumber:t,vcreditCardNumber:n,alertMsg:null})},a.validationState=function(e){return null==e?null:e?"success":"error"},a.register=function(){var e=a.state,t=e.voib,n=e.vime,r=e.vprezime,i=e.vemail,l=e.vpassword,o=e.vcreditCardNumber,s=a.state,c=s.oib,u=s.ime,m=s.prezime,g=s.creditCardNumber,d=s.email,p=s.password,h=t&&n&&r&&i&&l&&o,v=h?null:"Krivi podatci.";if(h){var E={oib:c,ime:u,prezime:m,email:d,passwordHash:p,brojKreditneKartice:g};fetch("/korisnici",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).then(function(e){200!=e.status?e.json().then(function(e){a.setState({registrationValid:!1,alertMsg:e.message})}):(a.setState({registrationValid:!0,alertMsg:"Uspje\u0161na registracija! Sada se mo\u017eete prijaviti."}),setTimeout(function(){return a.props.onHide()},3500))})}else a.setState({registrationValid:h,alertMsg:v})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.oib,a=e.ime,n=e.prezime,i=e.email,l=e.password,o=e.creditCardNumber,s=e.voib,c=e.vime,u=e.vprezime,m=e.vemail,g=e.vpassword,d=e.vcreditCardNumber,p=e.alertMsg,h=e.registrationValid,v=this.props.back;return r.a.createElement("div",null,r.a.createElement(w.a.Body,null,r.a.createElement("small",null,"sva polja su obavezna*"),r.a.createElement(J.a,null,r.a.createElement(R.a,{validationState:this.validationState(m)},r.a.createElement("h5",null,r.a.createElement("b",null,"E-mail")),r.a.createElement(x.a,{name:"email",type:"email",value:i,onChange:this.emailChange,autoComplete:"email"}),r.a.createElement(K.a,null,null==m||(m?"":"Krivi format"))),r.a.createElement(R.a,{validationState:this.validationState(g)},r.a.createElement("h5",null,r.a.createElement("b",null,"Lozinka")),r.a.createElement(x.a,{name:"password",type:"password",value:l,onChange:this.passwordChange,autoComplete:"new-password"}),r.a.createElement(K.a,null,null==g||(g?"":"Prekratka lozinka"))),r.a.createElement(R.a,{validationState:this.validationState(c)},r.a.createElement("h5",null,r.a.createElement("b",null,"Ime")),r.a.createElement(x.a,{name:"ime",type:"text",value:a,onChange:this.imeChange}),r.a.createElement(K.a,null,null==c||(c?"":"Morate unjeti ime"))),r.a.createElement(R.a,{validationState:this.validationState(u)},r.a.createElement("h5",null,r.a.createElement("b",null,"Prezime")),r.a.createElement(x.a,{name:"prezime",type:"text",value:n,onChange:this.prezimeChange}),r.a.createElement(K.a,null,null==u||(u?"":"Morate unjeti prezime"))),r.a.createElement(R.a,{validationState:this.validationState(s)},r.a.createElement("h5",null,r.a.createElement("b",null,"OIB")),r.a.createElement(x.a,{name:"oib",type:"text",value:t,onChange:this.oibChange}),r.a.createElement(K.a,null,null==s||(s?"":"Neispravan OIB"))),r.a.createElement(R.a,{validationState:this.validationState(d)},r.a.createElement("h5",null,r.a.createElement("b",null,"Broj kreditne kartice")),r.a.createElement(x.a,{name:"creditCardNumber",type:"text",value:o,onChange:this.creditCardNumberChange,autoComplete:"cc-number"}),r.a.createElement(K.a,null,null==d||(d?"":"Neispravan broj kreditne kartice"))),p?r.a.createElement(P.a,{bsStyle:h?"success":"danger"},p):null)),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:v},"Natrag"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Registriraj se")))}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={oib:"",ime:"",email:"",password:"",address:"",voib:null,vime:null,vemail:null,vpassword:null,vaddress:null,alertMsg:null,registrationValid:!1},a.emailChange=function(e){var t=e.target.value,n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase());a.setState({email:t,vemail:n,alertMsg:null})},a.imeChange=function(e){var t=e.target.value,n=t.length>0;a.setState({ime:t,vime:n,alertMsg:null})},a.passwordChange=function(e){var t=e.target.value,n=t.length>4;a.setState({password:t,vpassword:n,alertMsg:null})},a.oibChange=function(e){var t=e.target.value,n=11===t.length&&/^\d+$/.test(t);a.setState({oib:t,voib:n,alertMsg:null})},a.addressChange=function(e){var t=e.target.value,n=t.length>0;a.setState({address:t,vaddress:n,alertMsg:null})},a.validationState=function(e){return null==e?null:e?"success":"error"},a.register=function(){a.setState({showLoadinIcon:!0});var e=a.state,t=e.voib,n=e.vime,r=e.vemail,i=e.vpassword,l=e.vaddress,o=a.state,s=o.oib,c=o.ime,u=o.email,m=o.password,g=o.address,d=t&&n&&r&&i&&l,p=d?null:"Krivi podatci.";if(d){var h={oib:s,ime:c,email:u,passwordHash:m,adresaSjedista:g};fetch("/tvrtke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(function(e){200!=e.status?e.json().then(function(e){a.setState({registrationValid:!1,alertMsg:e.message})}):(a.setState({registrationValid:!0,alertMsg:"Uspje\u0161na registracija! Sada se mo\u017eete prijaviti."}),setTimeout(function(){return a.props.onHide()},3500))})}else a.setState({registrationValid:d,alertMsg:p})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.oib,a=e.ime,n=e.email,i=e.password,l=e.address,o=e.voib,s=e.vime,c=e.vemail,u=e.vpassword,m=e.vaddress,g=e.alertMsg,d=e.registrationValid,p=this.props.back;return r.a.createElement("div",null,r.a.createElement(w.a.Body,null,r.a.createElement("small",null,"sva polja su oabvezna*"),r.a.createElement(J.a,null,r.a.createElement(R.a,{validationState:this.validationState(c)},r.a.createElement("h5",null,r.a.createElement("b",null,"E-mail")),r.a.createElement(x.a,{name:"email",type:"email",value:n,onChange:this.emailChange,autoComplete:"email"}),r.a.createElement(K.a,null,null==c||(c?"":"Krivi format"))),r.a.createElement(R.a,{validationState:this.validationState(u)},r.a.createElement("h5",null,r.a.createElement("b",null,"Lozinka")),r.a.createElement(x.a,{name:"password",type:"password",value:i,onChange:this.passwordChange,autoComplete:"new-password"}),r.a.createElement(K.a,null,null==u||(u?"":"Prekratka lozinka"))),r.a.createElement(R.a,{validationState:this.validationState(s)},r.a.createElement("h5",null,r.a.createElement("b",null,"Ime")),r.a.createElement(x.a,{name:"ime",type:"text",value:a,onChange:this.imeChange,autoComplete:"organization"}),r.a.createElement(K.a,null,null==s||(s?"":"Morate unjeti ime"))),r.a.createElement(R.a,{validationState:this.validationState(o)},r.a.createElement("h5",null,r.a.createElement("b",null,"OIB")),r.a.createElement(x.a,{name:"oib",type:"text",value:t,onChange:this.oibChange}),r.a.createElement(K.a,null,null==o||(o?"":"Neispravan OIB"))),r.a.createElement(R.a,{validationState:this.validationState(m)},r.a.createElement("h5",null,r.a.createElement("b",null,"Adresa sjedi\u0161ta")),r.a.createElement(x.a,{name:"address",type:"address",value:l,onChange:this.addressChange,autoComplete:"address-line1"}),r.a.createElement(K.a,null,null==m||(m?"":"Morate unijeti adresu"))),g?r.a.createElement(P.a,{bsStyle:d?"success":"danger"},g):null)),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:p},"Natrag"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Registriraj se")))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={stage:null},a.hide=function(){a.props.onHide(),setTimeout(a.resetStage,200)},a.onChoose=function(e){a.setState({stage:e.target.name})},a.resetStage=function(){a.setState({stage:null})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.onHide,n=this.state.stage,i=null;return null==n?i=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Odaberite vrstu registracije:")),r.a.createElement(w.a.Body,null,r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"tvrtka",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Tvrtka"),r.a.createElement("p",null,"Mo\u0107i \u0107ete ",r.a.createElement("b",null,"nuditi usluge parkinga")," kroz ovu aplikaciju.")),r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"korisnik",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Korisnik"),r.a.createElement("p",null,"Mo\u0107i \u0107ete ",r.a.createElement("b",null,"rezervirati parking")," kroz ovu aplikaciju."))))):"tvrtka"==n?i=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Registracija tvrtke:")),r.a.createElement(W,{back:this.resetStage,onHide:this.hide})):"korisnik"==n&&(i=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Registracija korisnika:")),r.a.createElement($,{back:this.resetStage,onHide:this.hide}))),r.a.createElement(w.a,{className:"registration-modal",show:t,onHide:this.hide,keyboard:!0},i)}}]),t}(n.Component),G=a(298),Q=(a(152),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0},a.carRemoved=function(){fetch("/automobili/"+a.props.car.registracijskaOznaka,{method:"DELETE"}),a.setState({show:!1}),setTimeout(function(){return a.props.carsUpdate()},10)},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.car,t=this.state.show;return r.a.createElement(j.a,{in:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("h5",null,r.a.createElement("b",null,e.ime)),"  ",r.a.createElement("small",null,"registracija:")," ",e.registracijskaOznaka,r.a.createElement(k.a,{className:"right",bsStyle:"danger",bsSize:"xsmall",onClick:this.carRemoved},"Ukloni")))}}]),t}(n.Component)),X=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cars,a=e.carsUpdate;return r.a.createElement(G.a,{componentClass:"ul"},t.map(function(e){return r.a.createElement(Q,{key:e.registracijskaOznaka,car:e,carsUpdate:a})}))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={ime:"",registracija:"",vime:null,vregistracija:null,alertMsg:null,registrationValid:!1},a.imeChange=function(e){var t=e.target.value,n=t.length>0;a.setState({ime:t,vime:n,alertMsg:null})},a.registracijaChange=function(e){var t=e.target.value,n=/^[a-zA-Z]{2}-[0-9]{3,4}-[a-zA-Z]{1,2}$/.test(t);a.setState({registracija:t,vregistracija:n,alertMsg:null})},a.validationState=function(e){return null==e?null:e?"success":"error"},a.register=function(){var e=a.state,t=e.vime,n=e.vregistracija,r=e.ime,i=e.registracija;if(t&&n){var l={ime:r,registracijskaOznaka:i.toUpperCase()};fetch("/automobili",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(function(e){200!=e.status?a.setState({registrationValid:!1,alertMsg:"Automobil s danom registracijom ve\u0107 postoji."}):(a.setState({registrationValid:!0,alertMsg:"Uspje\u0161na registracija automobila!"}),a.props.carsUpdate(),setTimeout(function(){return a.props.back()},2500))})}else a.setState({registrationValid:!1,alertMsg:"Neispravni podatci!"})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.ime,a=e.registracija,n=e.vime,i=e.vregistracija,l=e.alertMsg,o=e.registrationValid,s=this.props.back;return r.a.createElement("div",null,r.a.createElement(w.a.Body,null,r.a.createElement(J.a,null,r.a.createElement(R.a,{validationState:this.validationState(n)},r.a.createElement("h5",null,r.a.createElement("b",null,"Naziv")),r.a.createElement(x.a,{name:"ime",type:"text",value:t,onChange:this.imeChange}),r.a.createElement(K.a,null,null==n||(n?"":"Morate unjeti naziv"))),r.a.createElement(R.a,{validationState:this.validationState(i)},r.a.createElement("h5",null,r.a.createElement("b",null,"Registracija")),r.a.createElement(x.a,{name:"registracija",type:"text",value:a,onChange:this.registracijaChange}),r.a.createElement(K.a,null,null==i||(i?"":"format: AB-1234-CD"))),l?r.a.createElement(P.a,{bsStyle:o?"success":"danger"},l):null)),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:s},"Natrag"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Registriraj automobil")))}}]),t}(n.Component),ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={stage:0},a.hide=function(){a.props.onHide(),setTimeout(a.downStage,200)},a.upStage=function(){a.setState({stage:1})},a.downStage=function(){a.setState({stage:0})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.cars,n=e.carsUpdate,i=e.addCar,l=this.state.stage,o=null;o=0==a.length?r.a.createElement("div",{className:"center"},r.a.createElement("h4",null,"Niste registrirali niti jedan automobil.")):r.a.createElement(X,{cars:a,carsUpdate:n});var s=null;return 0==l?s=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:this.hide},r.a.createElement(w.a.Title,null,"Va\u0161i automobili")),r.a.createElement(w.a.Body,null,o),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:this.upStage},"Dodaj automobil"))):1==l&&(s=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:this.hide},r.a.createElement(w.a.Title,null,"Registracija automobila:")),r.a.createElement(_,{back:this.downStage,addCar:i,carsUpdate:n}))),r.a.createElement(w.a,{show:t,onHide:this.hide,keyboard:!0},s)}}]),t}(n.Component),te=(a(278),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0},a.reservationRemoved=function(){a.setState({show:!1}),fetch("/rezervacije/trajna/"+a.props.reservation.id,{method:"DELETE"}).then(function(e){setTimeout(function(){return a.props.reservationsUpdate()},200)})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.reservation,t=this.state.show;return r.a.createElement(j.a,{in:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("div",{className:"reservation"},r.a.createElement("h5",null,r.a.createElement("small",null,"parkirali\u0161te: "),r.a.createElement("b",null,e.parkiraliste)),r.a.createElement(k.a,{className:"right",bsStyle:"danger",bsSize:"xsmall",onClick:this.reservationRemoved},"Ukini"))))}}]),t}(n.Component)),ae=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.show;return r.a.createElement("div",{className:"center"},r.a.createElement(j.a,{in:e},r.a.createElement("img",{alt:"U\u010ditavam...",src:"./icons/loading_modal.gif"})))}}]),t}(n.Component),ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={reservations:[],loading:!0},a.reservationsUpdate=function(){fetch("/rezervacije").then(function(e){return e.json()}).then(function(e){var t=[];e.forEach(function(e){if(e.trajna){var n={id:e.id,parkiraliste:a.props.parkingName(e.parkiralisteID)};t.push(n)}}),a.setState({reservations:t,loading:!1})})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.reservationsUpdate()}},{key:"render",value:function(){var e=this,t=this.state,a=t.reservations,n=t.loading;return n?r.a.createElement(ae,{show:n}):0===a.length?r.a.createElement("h3",null,"Nemate trajnih rezervacija."):r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{componentClass:"ul"},a.map(function(t){return r.a.createElement(te,{key:t.id,reservation:t,reservationsUpdate:e.reservationsUpdate})})))}}]),t}(n.Component),re=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.onHide,n=e.parkingName;return r.a.createElement(w.a,{show:t,onHide:a,keyboard:!0},r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Va\u0161e trajne rezervacije")),r.a.createElement(w.a.Body,null,r.a.createElement(ne,{parkingName:n})),r.a.createElement(w.a.Footer,null,r.a.createElement("small",null,"Napravite novu rezervaciju tako da kliknete na \u017eeljeno parkirali\u0161te na karti te potom gumb 'rezerviraj'."))))}}]),t}(n.Component),ie=a(292);function le(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.company.oib),r.a.createElement("td",null,e.company.ime),r.a.createElement("td",null,e.company.email),r.a.createElement("td",null,e.company.adresaSjedista),r.a.createElement("td",null,r.a.createElement(k.a,{bsStyle:"danger",bsSize:"xsmall",onClick:function(){fetch("/tvrtke/"+e.company.email,{method:"DELETE"}).then(function(){e.update(),e.parkingsUpdate()})}},"Izbri\u0161i")))}function oe(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.user.oib),r.a.createElement("td",null,e.user.ime," ",e.user.prezime),r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,r.a.createElement(k.a,{bsStyle:"danger",bsSize:"xsmall",onClick:function(){fetch("/korisnici/"+e.user.email,{method:"DELETE"}).then(function(){return e.update()})}},"Izbri\u0161i")))}var se=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.users,n=e.companies,i=e.updateUsers,l=e.parkingsUpdate,o=null,s=null;return"tvrtke"===t?(o=r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"OIB"),r.a.createElement("th",null,"Naziv"),r.a.createElement("th",null,"E-mail"),r.a.createElement("th",null,"Adresa sjedi\u0161ta"),r.a.createElement("th",null,"#"))),s=r.a.createElement("tbody",null,n.map(function(e){return r.a.createElement(le,{key:e.id,company:e,update:i,parkingsUpdate:l})}))):(o=r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"OIB"),r.a.createElement("th",null,"Puno ime"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"#"))),s=r.a.createElement("tbody",null,a.map(function(e){return r.a.createElement(oe,{key:e.id,user:e,update:i})}))),r.a.createElement(ie.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},o,s)}}]),t}(n.Component),ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={stage:null,users:[],companies:[]},a.hide=function(){a.props.onHide(),setTimeout(a.resetStage,200)},a.onChoose=function(e){a.setState({stage:e.target.name})},a.resetStage=function(){a.setState({stage:null})},a.updateTvrtke=function(){fetch("/tvrtke").then(function(e){return e.json()}).then(function(e){a.setState({companies:e})})},a.updateKorisnici=function(){fetch("/korisnici").then(function(e){return e.json()}).then(function(e){a.setState({users:e})})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateTvrtke(),this.updateKorisnici()}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.onHide,n=e.parkingsUpdate,i=this.state,l=i.stage,o=i.users,s=i.companies,c=null;return null==l?c=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Odaberite vrstu ra\u010duna:")),r.a.createElement(w.a.Body,null,r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"tvrtke",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Tvrtke")),r.a.createElement("div",{className:"reg-choose"},r.a.createElement(k.a,{name:"korisnici",className:"reg-btn",bsStyle:"info",onClick:this.onChoose},"Korisnici"))))):"tvrtke"===l?c=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Tvrtke")),r.a.createElement(w.a.Body,null,r.a.createElement(se,{type:l,companies:s,updateUsers:this.updateTvrtke,parkingsUpdate:n})),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:this.resetStage},"Natrag"))):"korisnici"===l&&(c=r.a.createElement("div",null,r.a.createElement(w.a.Header,{closeButton:!0,onHide:a},r.a.createElement(w.a.Title,null,"Korisnici")),r.a.createElement(w.a.Body,null,r.a.createElement(se,{type:l,users:o,updateUsers:this.updateKorisnici,parkingsUpdate:n})),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"primary",onClick:this.resetStage},"Natrag")))),r.a.createElement(w.a,{className:"registration-modal",show:t,onHide:this.hide,keyboard:!0},c)}}]),t}(n.Component),ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={registerShow:!1,carsShow:!1,reservationsShow:!1,usersShow:!1},a.registerShowOn=function(){a.setState({registerShow:!0})},a.registerShowOff=function(){a.setState({registerShow:!1})},a.carsShowOn=function(){a.setState({carsShow:!0})},a.carsShowOff=function(){a.setState({carsShow:!1})},a.reservationsShowOn=function(){a.setState({reservationsShow:!0})},a.reservationsShowOff=function(){a.setState({reservationsShow:!1})},a.usersShowOn=function(){a.setState({usersShow:!0})},a.usersShowOff=function(){a.setState({usersShow:!1})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.registerShow,a=e.carsShow,n=e.reservationsShow,i=e.usersShow,l=this.props,o=l.loginSuccess,s=l.tipKorisnika,c=l.logoutSuccess,u=l.cars,m=l.carsUpdate,g=l.addCar,d=l.newParkingToggle,p=l.isAddingNewParking,h=l.parkingName,v=l.parkingsUpdate,E=null;switch(s){case 3:E=r.a.createElement(B.a.Collapse,null,r.a.createElement(B.a.Form,{pullLeft:!0},r.a.createElement(Y,{loginSuccess:o})),r.a.createElement(B.a.Form,{pullRight:!0},r.a.createElement(k.a,{bsStyle:"primary",type:"submit",onClick:this.registerShowOn},"Registriraj se")));break;case 0:E=r.a.createElement(B.a.Collapse,null,r.a.createElement(B.a.Text,null,"Bok, ",r.a.createElement("b",null,sessionStorage.getItem("name"))),r.a.createElement(B.a.Form,{pullLeft:!0},r.a.createElement(k.a,{bsStyle:"info",onClick:this.carsShowOn},"Automobili")," ","    ",r.a.createElement(k.a,{bsStyle:"info",onClick:this.reservationsShowOn},"Trajne rezervacije")," ","    "),r.a.createElement(Z,{logoutSuccess:c}));break;case 1:E=r.a.createElement(B.a.Collapse,null,r.a.createElement(B.a.Text,null,"Tvrtka: ",r.a.createElement("b",null,sessionStorage.getItem("name"))),r.a.createElement(B.a.Form,{pullLeft:!0},r.a.createElement(k.a,{bsStyle:"info",onClick:d,disabled:p},"Dodaj novi parking")," ","    "),r.a.createElement(Z,{isAddingNewParking:p,logoutSuccess:c}));break;case 2:E=r.a.createElement(B.a.Collapse,null,r.a.createElement(B.a.Text,null,"Administrator"),r.a.createElement(B.a.Form,{pullLeft:!0},r.a.createElement(k.a,{bsStyle:"info",onClick:this.usersShowOn},"Upravljanje ra\u010dunima")," ","    "),r.a.createElement(Z,{logoutSuccess:c}))}return r.a.createElement("div",null,r.a.createElement(B.a,{inverse:!0,fixedTop:!0},r.a.createElement(B.a.Header,null,r.a.createElement(B.a.Brand,null,r.a.createElement(S.a,{src:"./icons/brand-logo.png"})),r.a.createElement(B.a.Toggle,null)),E),3===s?r.a.createElement(q,{show:t,onHide:this.registerShowOff}):null,2===s?r.a.createElement(ce,{show:i,onHide:this.usersShowOff,parkingsUpdate:v}):null,0===s?r.a.createElement(re,{show:n,onHide:this.reservationsShowOff,parkingName:h}):null,0===s?r.a.createElement(ee,{show:a,onHide:this.carsShowOff,cars:u,carsUpdate:m,addCar:g}):null)}}]),t}(n.Component),me=b.a.icon({iconUrl:"icons/parking.png",iconSize:[33.2,604/15],iconAnchor:[16.6,604/15],popupAnchor:[0,-604/15]}),ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={reserveShow:!1},a.reserveShowOn=function(){a.setState({reserveShow:!0})},a.reserveShowOff=function(){a.setState({reserveShow:!1})},a.spu=function(){a.props.selectedParkingUpdate(a.props.parking.id)},a.ref=r.a.createRef(),a.deleteParking=function(){fetch("/parkiralista/"+a.props.parking.id,{method:"DELETE"}).then(a.props.parkingUpdate())},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.updateMarkerRef(this.props.parking.id,this.ref.current.leafletElement)}},{key:"render",value:function(){var e=this.props,t=e.parking,a=e.tipKorisnika,n=e.editParking,i=e.cars,l=this.state.reserveShow,o=null;return 1===a?o=r.a.createElement("div",null,r.a.createElement(k.a,{className:"marker-btns",bsStyle:"info",bsSize:"small",onClick:n},"Uredi podatke"),r.a.createElement("br",null),r.a.createElement(k.a,{className:"marker-btns",bsStyle:"danger",bsSize:"small",onClick:this.deleteParking},"Izbri\u0161i")):0===a&&(o=r.a.createElement(k.a,{bsStyle:"info",bsSize:"small",onClick:this.reserveShowOn},"Rezerviraj")),r.a.createElement(p.a,{position:t.lokacija,icon:me,ref:this.ref},r.a.createElement(h.a,{onOpen:this.spu,onClose:this.closePopup,autoPan:!1},r.a.createElement("h3",null,t.ime),r.a.createElement("p",null,r.a.createElement("small",null,"popunjenost:")," ",t.popunjenost,"/",t.kapacitet),r.a.createElement("p",null,r.a.createElement("small",null,"cijena: ")," ",t.cijena," kn/h"),o),r.a.createElement(V,{show:l,onHide:this.reserveShowOff,parking:t,cars:i,parkingsUpdate:this.props.parkingUpdate}))}}]),t}(n.Component),de=a(161),pe=a.n(de),he=(a(284),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={ime:"",kapacitet:"",cijena:"",vime:null,vkapacitet:null,vcijena:null,alertMsg:null,registrationValid:!1},a.imeChange=function(e){var t=e.target.value,n=t.length>0;a.setState({ime:t,vime:n,alertMsg:null})},a.kapacitetChange=function(e){var t=e.target.value,n=t.length>0&&/^\d+$/.test(t);a.setState({kapacitet:t,vkapacitet:n,alertMsg:null})},a.cijenaChange=function(e){var t=e.target.value,n=t.length>0&&/^\d+$/.test(t);a.setState({cijena:t,vcijena:n,alertMsg:null})},a.validationState=function(e){return null==e?null:e?"success":"error"},a.register=function(){var e=a.state,t=e.vime,n=e.vkapacitet,r=e.vcijena,i=a.state,l=i.ime,o=i.kapacitet,s=i.cijena,c=t&&n&&r,u=c?null:"Krivi podatci.";if(c){var m={ime:l,lokacija:a.props.newParkingLocation,kapacitet:o,cijena:s};return a.props.isEditingParking?void fetch("/parkiralista/uredi/"+a.props.selectedParking.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(function(e){a.setState({registrationValid:!0,alertMsg:"Podaci uspje\u0161no ure\u0111eni!"}),a.props.isEditingParkingOff(),a.props.parkingsUpdate(),setTimeout(function(){return a.props.newParkingToggle()},2500)}):void fetch("/parkiralista",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(function(e){200!=e.status?e.json().then(function(e){a.setState({registrationValid:!1,alertMsg:e.message})}):(a.setState({registrationValid:!0,alertMsg:"Podaci uspje\u0161no spremljeni!"}),a.props.parkingsUpdate(),setTimeout(function(){return a.props.newParkingToggle()},2500))})}a.setState({registrationValid:c,alertMsg:u})},a.back=function(){a.props.newParkingToggle(),a.props.isEditingParkingOff()},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this,r=this.props,i=r.isAddingNewParking,l=r.isEditingParking,o=r.selectedParking;!e.isEditingParking&&l&&this.setState({ime:o.ime,kapacitet:o.kapacitet,cijena:o.cijena,vime:!0,vkapacitet:!0,vcijena:!0,alertMsg:null,registrationValid:!1}),e.isAddingNewParking&&!i&&setTimeout(function(){n.setState({ime:"",kapacitet:"",cijena:"",vime:null,vkapacitet:null,vcijena:null,alertMsg:null,registrationValid:!1})},200)}},{key:"render",value:function(){var e=this.props.isAddingNewParking,t=this.state,a=t.ime,n=t.kapacitet,i=t.cijena,l=t.vime,o=t.vkapacitet,s=t.vcijena,c=t.alertMsg,u=t.registrationValid;return r.a.createElement(pe.a,{position:"right",isVisible:e,fluid:!0,defaultSize:.3,dimMode:"none"},r.a.createElement("div",null,r.a.createElement(w.a.Header,null,r.a.createElement("h4",null,"Uredite podatke parkirali\u0161ta")),r.a.createElement(w.a.Body,null,r.a.createElement("small",null,"sva polja su obavezna*"),r.a.createElement(J.a,null,r.a.createElement(R.a,{validationState:this.validationState(l)},r.a.createElement("h5",null,r.a.createElement("b",null,"Naziv")),r.a.createElement(x.a,{name:"ime",type:"text",value:a,onChange:this.imeChange,autoComplete:"organization"}),r.a.createElement(K.a,null,null==l||(l?"":"Morate unjeti naziv"))),r.a.createElement(R.a,{validationState:this.validationState(o)},r.a.createElement("h5",null,r.a.createElement("b",null,"Kapacitet")),r.a.createElement(x.a,{name:"kapacitet",type:"number",value:n,onChange:this.kapacitetChange}),r.a.createElement(K.a,null,null==o||(o?"":"Morate unjeti kapacitet i kapacitet mora biti cijeli broj"))),r.a.createElement(R.a,{validationState:this.validationState(s)},r.a.createElement("h5",null,r.a.createElement("b",null,"Cijena")," ",r.a.createElement("small",null,"(kn/h)")),r.a.createElement(x.a,{name:"cijena",type:"number",value:i,onChange:this.cijenaChange}),r.a.createElement(K.a,null,null==s||(s?"":"Morate unjeti cijenu i cijena mora biti cijeli broj"))),r.a.createElement(C.a,null,"Za odabir lokacije vucite marker na karti."),c?r.a.createElement(P.a,{bsStyle:u?"success":"danger"},c):null)),r.a.createElement(w.a.Footer,null,r.a.createElement(k.a,{bsStyle:"warning",onClick:this.back},"Odustani"),"  ",r.a.createElement(k.a,{bsStyle:"success",onClick:this.register},"Spremi"))))}}]),t}(n.Component)),ve=b.a.icon({iconUrl:"icons/new_parking.png",iconSize:[33.2,604/15],iconAnchor:[16.6,604/15],popupAnchor:[0,-604/15],className:"new-parking-marker"}),Ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).ref=r.a.createRef(),a.update=function(){var e=a.ref.current;if(null!=e){var t=[e.leafletElement.getLatLng().lat,e.leafletElement.getLatLng().lng];a.props.newParkingLocationUpdate(t)}},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.newParkingLocation;return r.a.createElement(p.a,{position:e||[0,0],ref:this.ref,icon:ve,draggable:!0,onDragend:this.update})}}]),t}(n.Component),ke=b.a.icon({iconUrl:"icons/my_location.png",iconSize:[27,39.8],iconAnchor:[13.5,39.8],popupAnchor:[0,-39.8]}),fe={Zagreb:[45.810875,15.974711]};function be(e,t){return function(e,t,a,n,r){if(e===a&&t===n)return 0;var i=Math.PI*e/180,l=Math.PI*a/180,o=t-n,s=Math.PI*o/180,c=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos(s);return c>1&&(c=1),c=60*(c=180*(c=Math.acos(c))/Math.PI)*1.1515,"K"===r&&(c*=1.609344),"N"===r&&(c*=.8684),c}(e[0],e[1],t[0],t[1])}var je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={viewport:{center:fe.Zagreb,zoom:13},maxZoom:19,minZoom:7,maxBounds:b.a.latLngBounds(b.a.latLng(47.094206,12.02873),b.a.latLng(42.128702,20.731908)),watchId:0,selectedParking:null,markerRefs:{},isEditingParking:!1,newParkingLocation:fe.Zagreb},a.onViewportChanged=function(e){setTimeout(function(){return a.setState({viewport:e})},10),a.props.isAddingNewParking||setTimeout(function(){return a.setState({newParkingLocation:e.center})},10)},a.centerClicked=function(){a.centerMe()},a.centerMe=function(){var e={center:a.props.myPosition,zoom:a.state.viewport.zoom};a.setState({viewport:e})},a.centerTo=function(e){var t={center:e,zoom:15};a.setState({viewport:t})},a.getParkingsOfTvrtkaID=function(e){var t=[];return a.props.parkings.forEach(function(a){a.tvrtkaID==e&&t.push(a)}),t},a.getParkingOfId=function(e){var t=null;return a.props.parkings.forEach(function(a){a.id==e&&(t=a)}),t},a.openPopup=function(e){a.state.markerRefs[e].openPopup()},a.updateMarkerRef=function(e,t){a.setState(function(a){return{markerRefs:Object(o.a)({},a.markerRefs,Object(d.a)({},e,t))}})},a.centerToClosestParking=function(){var e=a.props,t=e.myPosition,n=e.parkings;if(null!=t&&null!=n){var r,i,l=null,o=null;n.forEach(function(e){var a=be(t,e.lokacija),n=e.kapacitet-e.popunjenost>10;null==l?(l=e,r=a):a<r&&(l=e,r=a),null==o&&n?(o=e,i=a):o&&n&&a<i&&(o=e,i=a)});var s=o||l;a.centerTo(s.lokacija),setTimeout(function(){return a.openPopup(s.id)},700)}},a.selectedParkingUpdate=function(e){a.setState({selectedParking:a.getParkingOfId(e)})},a.editParking=function(){a.setState(function(e){return{isEditingParking:!0,newParkingLocation:e.selectedParking.lokacija}}),a.props.newParkingToggle(),setTimeout(function(){return a.centerTo(a.state.selectedParking.lokacija)},100)},a.isEditingParkingOff=function(){setTimeout(a.setState(function(e){return{isEditingParking:!1}}),50)},a.isEditingParkingOn=function(){setTimeout(a.setState(function(e){return{isEditingParking:!0}}),50)},a.newParkingLocationUpdate=function(e){a.setState({newParkingLocation:e})},a.geoSucces=function(e){var t=[e.coords.latitude,e.coords.longitude];null==a.props.myPosition&&1!==a.props.tipKorisnika&&a.centerTo(t),a.props.myPositionUpdate(t)},a.geoError=function(){},a.state.watchId=navigator.geolocation.watchPosition(a.geoSucces,a.geoError),a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){navigator.geolocation.clearWatch(this.state.watchId)}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewport,n=t.maxZoom,i=t.maxBounds,l=t.minZoom,o=t.isEditingParking,s=t.newParkingLocation,c=t.selectedParking,u=this.props,m=u.myPosition,g=u.tipKorisnika,d=u.parkings,f=u.isAddingNewParking,b=u.newParkingToggle,j=u.parkingsUpdate,S=u.cars,y=null,w=1!==g?r.a.createElement(O,{myPosition:m,position:a.center,onClick:this.centerClicked}):null;m&&1!==g&&(y=r.a.createElement(p.a,{position:m,icon:ke},r.a.createElement(h.a,null,"Ovdje se vi nalazite.")));var C=d;1===g&&(C=this.getParkingsOfTvrtkaID(sessionStorage.getItem("id")));var P=C.map(function(t){return r.a.createElement(ge,{key:t.id,parking:t,tipKorisnika:g,selectedParkingUpdate:e.selectedParkingUpdate,updateMarkerRef:e.updateMarkerRef,editParking:e.editParking,cars:S,parkingUpdate:j})}),M=1!==g&&null!=m?r.a.createElement(k.a,{id:"parkiraj-me-btn",bsStyle:"primary",onClick:this.centerToClosestParking},"Parkiraj",r.a.createElement("br",null),"Me"):null,z=r.a.createElement(Ee,{newParkingLocation:s,newParkingLocationUpdate:this.newParkingLocationUpdate});return r.a.createElement("div",null,r.a.createElement(v.a,{className:"map",viewport:a,animate:!0,zoomControl:!1,onViewportChanged:this.onViewportChanged,maxZoom:n,maxBounds:i,minZoom:l},r.a.createElement(E.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),y,f?z:P,d.length>0?M:null,w),r.a.createElement(he,{isAddingNewParking:f,newParkingToggle:b,parkingsUpdate:j,isEditingParking:o,newParkingLocation:s,selectedParking:c,isEditingParkingOff:this.isEditingParkingOff}))}}]),t}(n.Component);function Se(e,t){return Math.floor(Math.random()*(t-e+1))+e}Se(300,500),Se(400,500),Se(490,500),Se(490,500),Se(50,150);var ye=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={myPosition:null,parkings:[],cars:[],tipKorisnika:3,isAddingNewParking:!1},a.puID=0,a.getParkingOfId=function(e,t){var a=null;return t.forEach(function(t){t.id!==e||(a=t)}),a},a.getParkingNameOfId=function(e){var t=null;return a.state.parkings.forEach(function(a){a.id!=e||(t=a.ime)}),t},a.myPositionUpdate=function(e){a.setState({myPosition:e})},a.loginSuccess=function(){a.updateTipKorisnika(),"0"===sessionStorage.getItem("tip")&&a.carsUpdate()},a.logoutSuccess=function(){fetch("/logout").then(function(){return a.setState({tipKorisnika:3})}).catch(function(){return a.setState({tipKorisnika:3})}),sessionStorage.clear()},a.updateTipKorisnika=function(){a.setState({tipKorisnika:Number(sessionStorage.getItem("tip"))})},a.carsUpdate=function(){fetch("/automobili").then(function(e){return e.json()}).then(function(e){a.setState({cars:e})}).catch(function(e){return a.logoutSuccess()})},a.parkingsUpdate=function(){fetch("/parkiralista").then(function(e){return e.json()}).then(function(e){fetch("/parkiralista/slobodna").then(function(e){return e.json()}).then(function(t){var n=[];t.forEach(function(t){var r=t.parkiralisteID,i=a.getParkingOfId(r,e);i=Object(o.a)({},i,{popunjenost:i.kapacitet-t.brojSlobodnihMjesta}),n.push(i)}),a.setState({parkings:n})})})},a.isAddingNewParkingToggle=function(){a.setState(function(e){return{isAddingNewParking:!e.isAddingNewParking}})},a}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=sessionStorage.getItem("tip");null!=e&&(this.updateTipKorisnika(),"0"===e&&this.carsUpdate()),this.parkingsUpdate(),this.puID=setInterval(this.parkingsUpdate,3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.puID)}},{key:"render",value:function(){var e=this.state,t=e.myPosition,a=e.tipKorisnika,n=e.cars,i=e.parkings,l=e.isAddingNewParking,o=r.a.createElement(ue,{id:"navbar",loginSuccess:this.loginSuccess,logoutSuccess:this.logoutSuccess,tipKorisnika:a,cars:n,carsUpdate:this.carsUpdate,addCar:this.addCar,newParkingToggle:this.isAddingNewParkingToggle,isAddingNewParking:l,parkingName:this.getParkingNameOfId,parkingsUpdate:this.parkingsUpdate});return o=l?null:o,r.a.createElement("div",null,o,r.a.createElement(je,{myPosition:t,myPositionUpdate:this.myPositionUpdate,tipKorisnika:a,parkings:i,parkingsUpdate:this.parkingsUpdate,isAddingNewParking:l,newParkingToggle:this.isAddingNewParkingToggle,cars:n}))}}]),t}(n.Component);l.a.render(r.a.createElement(ye,null),document.getElementById("root"))},53:function(e,t,a){}},[[163,2,1]]]);
//# sourceMappingURL=main.886483f7.chunk.js.map